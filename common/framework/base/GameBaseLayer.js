!function(){var t={_INTRO_LAYER_ZORDER:3e3,_ENCOURAGE_LAYER_ZORDER:4e3,_introLayer:null,_encourageLayer:null,_maskLayer:null,_MASK_LAYER_ZORDER:1999,ctor:function(){this._super(),this._introLayer=new cc.Layer,this.addChild(this._introLayer,this._INTRO_LAYER_ZORDER),this._encourageLayer=new cc.Layer,this.addChild(this._encourageLayer,this._ENCOURAGE_LAYER_ZORDER)},onEnter:function(){this._super()},onCloseCallback:function(){this._super(),this.encourage&&this.encourage.stop(),this.stopRightWrongSound(),stopAllEffects()},onEncourageCallback:function(){this.randomPlayEncourageAnimation()},onRefreshCallback:function(){this.stopRightWrongSound(),stopAllEffects()},randomPlayEncourageAnimation:function(t,e){this.encourage||(this.encourage=new EncourageAnimation,this._encourageLayer.addChild(this.encourage)),this.encourage.randomPlay(),t&&cc.isFunction(t)&&(this.__encourageAction&&this.stopAction(this.__encourageAction),this.__encourageAction=cc.sequence(cc.delayTime(this.getEncourageDuration()+.5),cc.callFunc(t,e)),this.runAction(this.__encourageAction))},initGameIntro:function(t){var e=new i(t,this);this._introLayer.addChild(e)},initGame:function(){},playRightSound:function(t,e){var i=baseFeedBackAudioResource.rights,n=i[Math.floor(Math.random()*i.length)];stopAllEffects(),t&&cc.isFunction(t)?playAudio(n,t,e):this._rightEffectId=playEffect(n)},playWrongSound:function(t,e){var i=baseFeedBackAudioResource.wrongs,n=i[Math.floor(Math.random()*i.length)];stopAllEffects(),t&&cc.isFunction(t)?playAudio(n,t,e):this._wrongEffectId=playEffect(n)},stopRightWrongSound:function(){this._rightEffectId&&cc.audioEngine.stopEffect(this._rightEffectId),this._wrongEffectId&&cc.audioEngine.stopEffect(this._wrongEffectId)},enableGameLayer:function(){this._maskLayer&&(this._maskLayer.setVisible(!1),this._maskLayer.x=1e4);var t=this.getNavButtonByTag("refresh");t&&t.setEnabled(!0);var e=this.getNavButtonByTag("encourage");e&&e.setEnabled(!0)},disableGameLayer:function(){this._maskLayer?(this._maskLayer.setVisible(!0),this._maskLayer.x=0):(this._maskLayer=new n,this.addChild(this._maskLayer,this._MASK_LAYER_ZORDER),this._maskLayer.x=0,this._maskLayer.y=0);var t=this.getNavButtonByTag("refresh");t&&t.setEnabled(!1);var e=this.getNavButtonByTag("encourage");e&&e.setEnabled(!1)},setGameLayerEnableStatus:function(t){t?this.enableGameLayer():this.disableGameLayer()},getEncourageDuration:function(){return this.encourage?this.encourage.getDuration():0}},e=BaseLayer.extend(t),i=cc.Layer.extend({_targetLayer:null,ctor:function(t,e){this._super();var i=cc.winSize;this.defaultSettings=t,this._targetLayer=e,this._targetLayer.disableGameLayer(),this.bg=new cc.LayerColor(cc.color(255,255,255,190)),this.addChild(this.bg),this.title=new cc.Sprite(this.defaultSettings.title),this.addChild(this.title),this.title.x=.5*i.width,this.title.y=.5*i.height,this.title.setScale(.1),this.callback=this.defaultSettings.callback,this.delayTime=this.defaultSettings.delayTime||1e3,this.titleDuration=this.defaultSettings.titleDuration||2e3,this.titleDuration=this.titleDuration/1e3;var n=this,a=cc.sequence(cc.scaleTo(.3,1,1),cc.delayTime(this.titleDuration),cc.callFunc(n.endIntro,n));this.title.runAction(a),this.defaultSettings.titleSound&&playEffect(this.defaultSettings.titleSound)},endIntro:function(){var t=this;if(t.title.setVisible(!1),t.bg.setVisible(!1),!this.defaultSettings.introSound)return void this.playAudioEnd();playEffect(this.defaultSettings.introSound);var e;e=this.delayTime/1e3,this.title.runAction(cc.sequence(cc.delayTime(e),new cc.CallFunc(this.playAudioEnd,this)))},playAudioEnd:function(){this._targetLayer.enableGameLayer(),this.removeFromParent(!0),this.callback&&this.callback.call(this._targetLayer)}}),n=cc.LayerColor.extend({isEnabled:!1,ctor:function(){this._super(cc.color(255,255,255,0)),this.addEventListeners()},addEventListeners:function(){var t=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(t,e){var i=t.getLocation(),n=e.getCurrentTarget();return n.visible&&cc.rectContainsPoint(n.getBoundingBoxToWorld(),i)?n.isEnabled?!1:(e.stopPropagation(),!0):!1}});cc.eventManager.addListener(t.clone(),this)},disable:function(){this.isEnabled=!1}}),a=BaseScene.extend({run:function(){var t=new e;this.addChild(t),runScene(this)}});window.GameIntroLayer=i,window.GameBaseLayer=e,window.GameBaseScene=a}(),function(){var t=cc.LayerColor.extend({_lastRandomIndex:null,_lastAnimation:null,isEnabled:!0,ctor:function(){this._super(cc.color(255,255,255,0));var t=cc.winSize;this.animateSprite=new cc.Sprite,this.addChild(this.animateSprite),this.animateSprite.x=.5*t.width,this.animateSprite.y=.5*t.height,this.addEventListeners()},addEventListeners:function(){var t=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(t,e){var i=t.getLocation(),n=e.getCurrentTarget();return cc.rectContainsPoint(n.getBoundingBoxToWorld(),i)?n.isEnabled?(e.stopPropagation(),!1):!0:!1}});cc.eventManager.addListener(t.clone(),this)},randomPlay:function(){this.stop(),this.isEnabled=!0;var t=Math.floor(6*Math.random());this._lastRandomIndex?(this._lastRandomIndex==t&&(t=Math.floor(6*Math.random())),this._lastRandomIndex=t):this._lastRandomIndex=t;var e=.09,i=[frame_success1,frame_success2,frame_success3,frame_success4,frame_success5,frame_success6],n=new AnimationFrames(i[t],e);this.animateSprite.setTexture(i[t][0]),this._lastAnimation=n,this.animateSprite.runAction(cc.sequence(n,new cc.CallFunc(this.animationEnd,this))),playEffect(success_audio[t])},stop:function(){stopAllEffects(),this.animateSprite.stopAllActions()},animationEnd:function(){this.isEnabled=!1},getDuration:function(){return this._lastAnimation._duration}});window.EncourageAnimation=t}();