!function(){var t=cc.Layer.extend({opts:{loadingImg:pbRes.loading,autoPlay:!0},_videoBoxHtml:'<div id="videoBox" style="display: none"></div>',_videoHtml:'<video id="media" width="100%" style="-webkit-transform: translate3d(0, 0, 0)"></video>',_$canvas:null,_$videoBox:null,_video:null,_status:null,ctor:function(t){this._super(),this.addOpts(),this.createVideo(),this.onScreenResize(),this.setVideoEventBase(),t&&this.setVideoUrl(t)},addOpts:function(t){cc.extend(this.opts,t)},createVideo:function(){this._$canvas=$("canvas").css("background-color","transparent");var t=!1;document.getElementById("videoBox")?t=!0:($("#Cocos2dGameContainer").append(this._videoBoxHtml),$("#videoBox").css({width:this._$canvas.width(),height:this._$canvas.height()}).append(this._videoHtml)),this._$videoBox=$("#videoBox"),t&&$("video").hide()},loading:function(){this._$videoBox.hide(),this.bg_loading=new cc.Sprite(this.opts.loadingImg),this.bg_loading.attr({anchorX:0,anchorY:0}),this.addChild(this.bg_loading),this._status="loading"},onScreenResize:function(){var t=this;window.onresize=function(){t._$videoBox.css({width:t._$canvas.width(),height:t._$canvas.height()})}},setVideoEventBase:function(){var t=this;this._video=document.getElementById("media"),this._video.style.display="",this._video.addEventListener("timeupdate",function(i){var e=i.currentTarget;e.currentTime>0&&e.currentTime>=e.duration&&"ended"!=t._status&&(t.onEnded(),t._status="ended",t.btnPlay&&t.setVideoPause())},!1)},setVideoUrl:function(t){this.loading(),this._video.src=t,this._video.volume=0,this._video.play(),this.scheduleUpdate()},update:function(){this._video.currentTime>0&&(this.unscheduleUpdate(),this.canPlay(),this.opts.autoPlay?this._status="play":this.setVideoPause(),this._video.volume=1)},canPlay:function(){this._$videoBox.show(),this.removeChild(this.bg_loading),this.onLoaded()},setVideoPlay:function(t){this._video.play(),this._status="play",t&&this._video.currentTime>0&&(this._video.currentTime=0)},setVideoPause:function(){this._video.pause(),this._status="pause"},setVideoRePlay:function(){this.setVideoPlay(!0)},onLoaded:function(){},onEnded:function(){},onClosed:function(){this._video.paused||this.setVideoPause(),this._$canvas.css("background-color","black"),this._$videoBox.hide()}});window.cc.progressBarBase=t;var i=t.extend({barBg:null,btnPlay:null,sliderBar:null,timeSprite:null,txtCurrentTime:null,addOpts:function(t){this._super(cc.extend({showTime:!1,barBg:pbRes.tpl1_bg,playImg:pbRes.tpl1_play,stopImg:pbRes.tpl1_stop,bar1:pbRes.tpl1_color1,bar2:pbRes.tpl1_color2,point:pbRes.point,anchor:pbRes.tpl1_anchor},t))},onLoaded:function(){this._super(),this.barBg&&this.removeChild(this.barBg);var t=new cc.Sprite(this.opts.barBg);t.attr({anchorY:0,x:cc.winSize.width/2}),this.addChild(t),this.barBg=t;var i;this.opts.autoPlay?(i=new cc.Sprite(this.opts.stopImg),i.attr({anchorX:0,anchorY:0}),i._status="play"):(i=new cc.Sprite(this.opts.playImg),i.attr({anchorX:0,anchorY:0}),i._status="pause"),t.addChild(i),this.btnPlay=i,this.createSliderBar(),this.btnPlayEvent(),this.createTime()},createSliderBar:function(){var t=new cc.ControlSlider(this.opts.bar1,this.opts.bar2,this.opts.point);this.barBg.addChild(t),t.attr({anchorX:0,anchorY:0}),t.setMinimumValue(0),t.setMaximumValue(this._video.duration),this.sliderBar=t,t.thumbSprite.y+=5,this.sliderBarEvent()},setVideoEvent:function(){var t=this,i=this.btnPlay;this._video.addEventListener("play",function(){i&&(i._status="play",i.setTexture(t.opts.stopImg),t.onPlayed())},!1),this._video.addEventListener("pause",function(e){if(i){i._status="pause",i.setTexture(t.opts.playImg);var s=e.currentTarget;s.currentTime<s.duration&&t.onPaused()}},!1)},btnPlayEvent:function(){var t=this,i=this.btnPlay;addEvent(function(i,e){"pause"==e._status?t.setVideoPlay():"play"==e._status&&t.setVideoPause()},i),this._video.addEventListener("play",function(){i&&(i._status="play",i.setTexture(t.opts.stopImg),t.onPlayed())},!1),this._video.addEventListener("pause",function(e){if(i){i._status="pause",i.setTexture(t.opts.playImg);var s=e.currentTarget;s.currentTime<s.duration&&t.onPaused()}},!1)},sliderBarEvent:function(){var t=this,i=this.sliderBar;i.addTargetWithActionForControlEvents(this,function(i){(!t.barBg||t.barBg.visible)&&(t._video.currentTime=i.getValue(),t._video.paused&&t._video.currentTime>1&&t.setVideoPlay())},cc.CONTROL_EVENT_VALUECHANGED),this._video.addEventListener("timeupdate",function(t){var e=t.currentTarget;i.setValue(e.currentTime,!0)},!1)},createTime:function(){if(this.opts.showTime){var t=this,i=new cc.Sprite;this.barBg.addChild(i),this.timeSprite=i,this.txtCurrentTime=new TextField("00:00",20,CCG.FONT.KAITI),i.addChild(this.txtCurrentTime);var e=new TextField("/",20,CCG.FONT.KAITI);i.addChild(e),e.setPosition(35,0);var s=new TextField(this.timeConvert(this._video.duration),20,CCG.FONT.KAITI);i.addChild(s),s.setPosition(70,0),this._video.addEventListener("timeupdate",function(i){var e=i.currentTarget;e.currentTime>0&&t.txtCurrentTime.setString(t.timeConvert(e.currentTime))},!1)}},timeConvert:function(t){t=parseInt(t);var i,e,s,n;return e=parseInt(t/60),i=10>e?"0"+e:e,n=t%60,s=10>n?"0"+n:n,i+":"+s},setPosition:function(t,i){this.barBg.setPosition(t,i)},onPlayed:function(){},onPaused:function(){}});window.cc.progressBarBase_bar=i;var e=i.extend({btnHorn:null,sliderHorn:null,addOpts:function(t){this._super(cc.extend({showVolume:!1,bar21:pbRes.tpl3_color21,bar22:pbRes.tpl3_color22,horn1:pbRes.tpl3_horn1,horn2:pbRes.tpl3_horn2,point:pbRes.tpl3_point,audioPoint:pbRes.tpl1_audioPoint},t))},onLoaded:function(){this._super();this.btnHorn=new cc.Sprite(this.opts.horn1),this.btnHorn.attr({anchorX:0,anchorY:0}),this.barBg.addChild(this.btnHorn),this.btnHornEvent(),this.createSliderHorn()},createSliderHorn:function(){if(this.opts.showVolume){var t=new cc.ControlSlider(this.opts.bar21,this.opts.bar22,this.opts.audioPoint);this.barBg.addChild(t),t.attr({anchorX:0,anchorY:0}),t.setMinimumValue(0),t.setMaximumValue(1.01),t.setMaximumAllowedValue(1),t.setValue(1),this.sliderHorn=t,this.sliderHornEvent()}},sliderHornEvent:function(){var t=this,i=this.sliderHorn;i.addTargetWithActionForControlEvents(this,function(i){var e=i.getValue();t._video.volume=i.getValue(),0==e?(t.btnHorn.setTexture(t.opts.horn2),t.setAudioOff()):t.btnHorn.setTexture(t.opts.horn1)},cc.CONTROL_EVENT_VALUECHANGED)},btnHornEvent:function(){var t=this,i=this.btnHorn;addEvent(function(){t.sliderHorn.setVisible(!t.sliderHorn.visible)},i)},setAudioOff:function(){}});window.cc.progressBarBase_horn=e}(),function(){var t=cc.progressBarBase.extend({ctor:function(t){this._super(t)},addOpts:function(t){this._super(cc.extend({autoPlay:!0},t))}});window.cc.progressBar0=t}(),function(){var t=cc.progressBarBase_horn.extend({keyPoints:[],enableToggleBar:!0,ctor:function(t){cc.isString(t)?this._super(t):(this._super(t.mediaUrl),cc.isArray(t.keyPoints)&&(this.keyPoints=t.keyPoints))},addOpts:function(t){this._super(cc.extend({autoPlay:!0,barBg:pbRes.tpl1_bg,playImg:pbRes.tpl1_play,stopImg:pbRes.tpl1_stop,bar1:pbRes.tpl1_color1,bar2:pbRes.tpl1_color2,point:pbRes.tpl3_point,keyPoint:pbRes.point,zanting:pbRes.zanting,showVolume:!0,bar21:pbRes.tpl1_audioProgressBg,bar22:pbRes.tpl1_audioProgress,horn1:pbRes.tpl1_audio1,horn2:pbRes.tpl1_audio2,audioPoint:pbRes.tpl1_audioPoint,audioBg:pbRes.tpl1_audioBg},t))},setVideoEvent:function(){var t=this;this._video.addEventListener("timeupdate",function(i){var e=i.currentTarget;e.currentTime>0&&t.keyPoints.forEach(function(i,s){var n=e.currentTime;i.used?Math.abs(n-i.value)>1&&(i.used=!1):Math.abs(i.value-n)<=.3&&(i.used=!0,i.pause&&(t.setVideoPause(),i.showPauseImg&&t.showPauseImg()),cc.isFunction(i.func)&&i.func())})},!1)},onLoaded:function(){this._super();var t=this,i=this.sliderBar;this.audioBg=new cc.Sprite(this.opts.audioBg),this.addChild(this.audioBg,0),this.audioBg.setPosition(this.barBg.x+.5*this.barBg.width-10,20),this.barBg.zIndex=1,this.btnHorn.setPosition(this.barBg.width-15,16),this.sliderHorn.setPosition(this.barBg.width+15,27),this.sliderHorn.setVisible(!1),this.btnPlay.setPosition(50,0),i.setPosition(130,10),this.keyPoints.forEach(function(e){var s=new cc.Sprite(t.opts.keyPoint);i.addChild(s),s.attr({anchorX:0,anchorY:0,x:e.value/i.getMaximumValue()*i.width,y:14,visible:e.visible})}),this.setProgressBarHide(),addEvent(function(i,e){t.enableToggleBar&&i.y<200&&(t.barBg.visible?t.setProgressBarHide():t.setProgressBarShow())},this),addEvent(null,this.barBg),this.btnPlayBig=new cc.Sprite(this.opts.zanting),this.addChild(this.btnPlayBig),this.btnPlayBig.setPosition(cc.winSize.width/2,cc.winSize.height/2),this.btnPlayBig.setVisible(!1),addEvent(function(){t.setVideoPlay()},this.btnPlayBig),this.setVideoEvent()},setProgressBarHide:function(){this._prevY=this.barBg.y,this._prevAudioY=this.audioBg.y,this.audioBg.setVisible(!1),this.audioBg.attr({y:-100}),this.barBg.setVisible(!1),this.barBg.attr({y:-100})},setProgressBarShow:function(){this.audioBg.setVisible(!0),this.audioBg.attr({y:this._prevAudioY}),this.barBg.setVisible(!0),this.barBg.attr({y:this._prevY})},showPauseImg:function(){this.btnPlayBig.setVisible(!0),this.btnPlayBig.setPosition(.5*cc.winSize.width,.5*cc.winSize.height),this.btnPlayBig.scale=1,this.btnPlayBig.runAction(cc.spawn(cc.scaleTo(.5,.5,.5),cc.moveTo(.5,cc.p(cc.winSize.width-100,100))))},hidePauseImg:function(){this.btnPlayBig.setVisible(!1)},onPlayed:function(){this.hidePauseImg()},onPaused:function(){}});window.cc.progressBar1=t}(),function(){var t=cc.progressBarBase_horn.extend({timeLine:{path:"",data:""},ctor:function(t){this._super(t.mediaUrl),this.timeLine.path=t.timeLine},addOpts:function(t){this._super(cc.extend({autoPlay:!0,showTime:!0,showVolume:!0,barBg:pbRes.tpl3_bg,audio1:pbRes.tpl3_audio1,audio2:pbRes.tpl3_audio2,audioPoint:pbRes.tpl1_audioPoint,playImg:pbRes.tpl1_play,stopImg:pbRes.tpl1_stop,bar1:pbRes.tpl1_color1,bar2:pbRes.tpl1_color2,bar21:pbRes.tpl1_audioProgressBg,bar22:pbRes.tpl1_audioProgress,horn1:pbRes.tpl1_audio1,horn2:pbRes.tpl1_audio2,zimu1:pbRes.tpl3_zimu1,zimu2:pbRes.tpl3_zimu2,point:pbRes.tpl3_point,audioBg:pbRes.tpl3_audioBg},t))},setVideoEvent:function(){var t=this;this._video.addEventListener("timeupdate",function(i){var e=i.currentTarget;if(e.currentTime>0)for(var s=t.timeLine.data,n=0,o=s.length;o>n;n++){if(n+1==o){t.setCaption(s[n].value);break}if(s[n].time<e.currentTime&&s[n+1].time>e.currentTime){t.setCaption(s[n].value);break}}},!1)},onLoaded:function(){this._super();var t=this;this.audioBg=new cc.Sprite(this.opts.audioBg),this.addChild(this.audioBg,0),this.audioBg.setPosition(this.barBg.x+.5*this.barBg.width+40,30),this.barBg.zIndex=1,this.audioButton=new cc.Sprite(this.opts.audio1),this.barBg.addChild(this.audioButton),this.audioButton.setPosition(940,48),this.audioButton.status="on",this.captionButton=new cc.Sprite(this.opts.zimu1),this.barBg.addChild(this.captionButton),this.captionButton.setPosition(945,15),this.captionButton.status="on",this.btnPlay.setPosition(50,0),this.sliderBar.setPosition(130,10),this.timeSprite.setPosition(750,30),this.btnHorn.setPosition(885,35),this.sliderHorn.attr({rotation:270,x:910,y:75,visible:!1}),this.setProgressBarHide(),addEvent(function(i,e){i.y<200&&(t.barBg.visible?i.y>65&&(t.sliderHorn.visible?(i.x<1050+(t.barBg.x-640)||i.x>1120+(t.barBg.x-640))&&t.setProgressBarHide():t.setProgressBarHide()):t.setProgressBarShow())},this),addEvent(function(){"on"==t.audioButton.status?(t.audioButton.status="off",t.audioButton.setTexture(t.opts.audio2),t.setVoiceZero()):(t.audioButton.status="on",t.audioButton.setTexture(t.opts.audio1),t.setVoiceRestore())},this.audioButton),addEvent(function(){"on"==t.captionButton.status?(t.captionButton.status="off",t.captionButton.setTexture(t.opts.zimu2),t.hideCaption()):(t.captionButton.status="on",t.captionButton.setTexture(t.opts.zimu1),t.showCaption())},this.captionButton),cc.loader.loadJson(t.timeLine.path,function(i,e){t.timeLine.data=e,t.createCaption(),t.setVideoEvent()})},sliderHornEvent:function(){var t=this,i=this.sliderHorn;i.addTargetWithActionForControlEvents(this,function(i){var e=i.getValue();t._video.volume=i.getValue(),0==e?(t.btnHorn.setTexture(t.opts.horn2),t.setAudioOff()):(t.btnHorn.setTexture(t.opts.horn1),t.setAudioOn())},cc.CONTROL_EVENT_VALUECHANGED)},createCaption:function(){this.caption=new TextField("",40,CCG.FONT.KAITI,cc.color("#FFFFFF")),this.caption.enableStroke(cc.color("#000000"),2),this.addChild(this.caption),this.caption.setPosition(cc.winSize.width/2,110)},setProgressBarHide:function(){this._prevY=this.barBg.y,this._prevAudioY=this.audioBg.y,this.audioBg.setVisible(!1),this.audioBg.attr({y:-100}),this.barBg.setVisible(!1),this.barBg.attr({y:-100}),this.sliderHorn.setVisible(!1)},setProgressBarShow:function(){this.audioBg.setVisible(!0),this.audioBg.attr({y:this._prevAudioY}),this.barBg.setVisible(!0),this.barBg.attr({y:this._prevY})},setVoiceZero:function(t){0!=this._video.volume&&(this.videoVolume=this._video.volume,this.sliderHorn.setValue(0),cc.isFunction(t)&&t())},setVoiceRestore:function(){this.sliderHorn.setValue(this.videoVolume)},showCaption:function(){this.caption.setVisible(!0)},hideCaption:function(){this.caption.setVisible(!1)},setCaption:function(t){this.caption.string!=t&&this.caption.setString(t)},onPlayed:function(){},onPaused:function(){},closeFunc:function(){},setAudioOn:function(){},setAudioOff:function(){}});window.cc.progressBar2=t}(),function(){var t=cc.progressBarBase_horn.extend({keyPoints:[],timeLine:{path:"",data:""},ctor:function(t){this.keyPoints=t.keyPoints,this.timeLine.path=t.timeLine,this._super(t.mediaUrl)},addOpts:function(t){this._super(cc.extend({autoPlay:!1,barBg:pbRes.tpl4_uibg,chang1:pbRes.tpl4_chang,chang2:pbRes.tpl4_chang2,playImg:pbRes.tpl4_kaishi,stopImg:pbRes.tpl4_zanting,bar1:pbRes.tpl4_jindutiao1,bar2:pbRes.tpl4_jindutiao2,horn1:pbRes.tpl4_laba1,horn2:pbRes.tpl4_laba2,point:pbRes.tpl4_jindujiedian,changBg:pbRes.tpl4_changBg,sanjiao:pbRes.tpl4_sanjiao,xuxian:pbRes.tpl4_xuxian},t))},setVideoEvent:function(){var t=this;this._video.addEventListener("timeupdate",function(i){var e=i.currentTarget;if(e.currentTime>0)for(var s=t.timeLine.data,n=0,o=s.length;o>n;n++){if(n+1==o){t.setCaption(s[n]);break}if(s[n].time<e.currentTime&&s[n+1].time>e.currentTime){t.setCaption(s[n]);break}}},!1)},onLoaded:function(){this._super();var t=this,i=this.sliderBar;this.btnPlay.setPosition(70,80),this.btnHorn.attr({_status:"on",x:190,y:60}),i.setPosition(330,10),i._thumbSprite.setVisible(!1),this.keyPoints.forEach(function(e){var s=new cc.Sprite(t.opts.point);i.addChild(s),s.attr({anchorX:0,anchorY:0,x:e.time/i.getMaximumValue()*i.width,y:1})}),cc.loader.loadJson(t.timeLine.path,function(i,e){t.timeLine.data=e,t.createCaption(),t.setVideoEvent()})},btnHornEvent:function(){var t=this,i=this.btnHorn;addEvent(function(e,s){"on"==s._status?(i.setTexture(t.opts.horn2),i._status="off",t._video.volume=0):"off"==s._status&&(i.setTexture(t.opts.horn1),i._status="on",t._video.volume=1)},i)},createChang:function(){var t=this,i=new cc.Sprite(this.opts.chang1);i.attr({anchorX:0,anchorY:0}),this.barBg.addChild(i),i._status="on",i.setPosition(20,110),addEvent(function(e,s){"on"==s._status?(i.setTexture(t.opts.chang2),i._status="off",t.showChang()):"off"==s._status&&(i.setTexture(t.opts.chang1),i._status="on",t.hideChang())},i);var e=new cc.Layer;this.barBg.addChild(e),e.attr({x:5,y:180}),this._chang=e;var s=new cc.Sprite(this.opts.changBg);e.addChild(s),s.attr({anchorX:0,anchorY:0,scaleY:this.keyPoints.length});var n=new cc.Sprite(this.opts.sanjiao);e.addChild(n),n.attr({x:s.width/2});var o=new cc.FontDefinition;o.fontName=CCG.FONT.KAITI,o.fontSize=26,o.fillStyle=cc.color(255,255,255);var a=[];this.keyPoints.reverse().forEach(function(i,n){var r=new cc.LabelTTF(i.name,o);if(e.addChild(r),r.attr({time:i.time,x:s.width/2,y:n*(r.height+10)+25}),a.push(r),0!=n){var d=new cc.Sprite(t.opts.xuxian);e.addChild(d),d.attr({x:s.width/2,y:n*(r.height+10)+8})}addEvent(function(i,e){a.forEach(function(t){t.setColor(cc.color(255,255,255))}),e.setColor(cc.color(0,204,204)),t.playKeyPoint(e.time)},r)}),this.hideChang()},createCaption:function(){this.caption=new cc.Sprite,this.addChild(this.caption),this.captionImg=new cc.Sprite,this.caption.addChild(this.captionImg),this.captionImg.anchorX=0,this.captionImg.setPosition(290,80),this.captionText=new TextField("",40,CCG.FONT.KAITI,cc.color("#FFFFFF")),this.captionText.enableStroke(cc.color("#000000"),2),this.caption.addChild(this.captionText),this.captionText.anchorX=0,this.captionText.setPosition(420,70);var t=this;addEvent(function(){t._video.paused&&t.caption.audio&&playEffect(t.caption.audio)},this.captionImg)},onPlayed:function(){this._super(),stopAllEffects()},onPaused:function(){},showChang:function(){this._chang.attr({x:5})},hideChang:function(){this._chang.attr({x:-100})},playKeyPoint:function(t){this._video.paused&&this.setVideoPlay(),this._video.currentTime=t},showCaption:function(){this.caption.setVisible(!0)},hideCaption:function(){this.caption.setVisible(!1)},setCaption:function(t){this.captionText.string!=t.value&&(this.captionText.setString(t.value),this.caption.audio=t.audio,t.character?t.character!=this.captionImg.oldTexture&&(this.captionImg.initWithFile(t.character),this.captionImg.anchorX=0,this.captionImg.setPosition(290,80),this.captionImg.setVisible(!0),this.captionImg.oldTexture=t.character,this.captionText.setPosition(this.captionImg.x+this.captionImg.width+10,70)):this.captionImg.setVisible(!1))}});window.cc.progressBar3=t}(),function(){var t=cc.progressBarBase.extend({keyPoints:[],_shuziCount:6,_shuziList:[],_MT:!1,ctor:function(t){this._super(t.mediaUrl),this.keyPoints=t.keyPoints,this._shuziCount=Math.min(this._shuziCount,this.keyPoints.length),this.setVideoEvent()},addOpts:function(t){this._super(cc.extend({xian:pbRes.tpl5_orange_xian,shuzi:pbRes.tpl5_orange_shuzi,shuzi_plist:pbRes.tpl5_orange_shuzi_plist},t))},setVideoEvent:function(){var t=this;this._video.addEventListener("timeupdate",function(i){if(0!=t._shuziList.length)for(var e=i.currentTarget,s=0;s<t._shuziCount;s++)if(s==t._shuziCount-1){if(e.currentTime>t.keyPoints[s]){t.setKeyPoint(s);break}}else if(e.currentTime>t.keyPoints[s]&&e.currentTime<t.keyPoints[s+1]){t.setKeyPoint(s);break}},!1),this._video.addEventListener("play",function(){t.onPlayed()},!1),this._video.addEventListener("pause",function(i){var e=i.currentTarget;e.currentTime<e.duration&&t.onPaused()},!1)},onLoaded:function(){this._super(),this.initBg()},initBg:function(){var t=this,i=new cc.Sprite(this.opts.xian);this.addChild(i),i.attr({anchorX:1,anchorY:0,x:cc.winSize.width-10,y:20}),this._bg=i,this._shuziList=[],cc.spriteFrameCache.addSpriteFrames(this.opts.shuzi_plist);for(var e=0;e<this._shuziCount;e++){var s=new cc.Sprite("#anniu"+(e+1)+"_01.png");this._bg.addChild(s),s.attr({time:this.keyPoints[e],index:e,x:e*(s.width+10)+30,y:8}),this._shuziList.push(s),addEvent(function(i,e){t._shuziList.forEach(function(t){t.setSpriteFrame("anniu"+(t.index+1)+"_01.png")}),e.setSpriteFrame("anniu"+(e.index+1)+"_02.png"),t.playKeyPoint(e)},s)}},playKeyPoint:function(t){this._MT=!0,this._video.paused&&this.setVideoPlay(),this._video.currentTime=t.time,this._currIndex=t.index},setKeyPoint:function(t){return this._currIndex!=t?(this._currIndex=t,this._MT?void this.setVideoPause():void this._shuziList.forEach(function(i,e){e==t?i.setSpriteFrame("anniu"+(i.index+1)+"_02.png"):i.setSpriteFrame("anniu"+(i.index+1)+"_01.png")})):void 0},setVideoRePlay:function(){this._shuziList.forEach(function(t,i){0==i?t.setSpriteFrame("anniu"+(t.index+1)+"_02.png"):t.setSpriteFrame("anniu"+(t.index+1)+"_01.png")}),this.playKeyPoint(this._bg.children[0])},onPlayed:function(){},onPaused:function(){}});window.cc.progressBar4_orange=t;var i=t.extend({ctor:function(t){this._super(t)},addOpts:function(t){this._super(cc.extend({xian:pbRes.tpl5_blue_xian,shuzi:pbRes.tpl5_blue_shuzi,shuzi_plist:pbRes.tpl5_blue_shuzi_plist},t))},initBg:function(){var t=this,i=new cc.Sprite(this.opts.xian);this.addChild(i),i.attr({anchorX:1,anchorY:0,x:cc.winSize.width-10,y:30}),this._bg=i,this._shuziList=[],cc.spriteFrameCache.addSpriteFrames(this.opts.shuzi_plist);for(var e=0;e<this._shuziCount;e++){var s=new cc.Sprite("#anniu"+(e+1)+"_01.png");this._bg.addChild(s),s.attr({time:this.keyPoints[e],index:e,x:e*(s.width+15)+40,y:10}),this._shuziList.push(s),addEvent(function(i,e){t._shuziList.forEach(function(t){t.setSpriteFrame("anniu"+(t.index+1)+"_01.png")}),e.setSpriteFrame("anniu"+(e.index+1)+"_02.png"),t.playKeyPoint(e)},s)}}});window.cc.progressBar4_blue=i;var e=t.extend({_shuziCount:5,ctor:function(t){this._super(t)},addOpts:function(t){this._super(cc.extend({xian:pbRes.tpl5_purple_xian,shuzi:pbRes.tpl5_purple_shuzi,shuzi_plist:pbRes.tpl5_purple_shuzi_plist},t))},initBg:function(){var t=this,i=new cc.Sprite(this.opts.xian);this.addChild(i),i.attr({anchorX:1,anchorY:0,x:cc.winSize.width-10,y:30}),this._bg=i,this._shuziList=[],cc.spriteFrameCache.addSpriteFrames(this.opts.shuzi_plist);for(var e=0;e<this._shuziCount;e++){var s=new cc.Sprite("#anniu"+(e+1)+"_01.png");this._bg.addChild(s),s.attr({time:this.keyPoints[e],index:e,x:e*(s.width+20)+60,y:10}),this._shuziList.push(s),addEvent(function(i,e){t._shuziList.forEach(function(t){t.setSpriteFrame("anniu"+(t.index+1)+"_01.png")}),e.setSpriteFrame("anniu"+(e.index+1)+"_02.png"),t.playKeyPoint(e)},s)}}});window.cc.progressBar4_purple=e}(),function(){var t=cc.progressBarBase_horn.extend({_video2Html:'<video id="media2" width="100%" style="-webkit-transform: translate3d(0, 0, 0)"></video>',_video2:null,_videoIndex:0,_currVolume:1,ctor:function(t){this._super(t.media1),this.createVideo2(),this.setVideo2Event(),this.setVideoUrl2(t.media2)},addOpts:function(t){this._super(cc.extend({autoPlay:!1,showVolume:!0,barBg:pbRes.tpl1_bg,playImg:pbRes.tpl1_play,stopImg:pbRes.tpl1_stop,horn1:pbRes.tpl1_audio1,horn2:pbRes.tpl1_audio2,ren1:pbRes.tpl6_ren1,ren1_2:pbRes.tpl6_ren1_2,ren2:pbRes.tpl6_ren2,ren2_2:pbRes.tpl6_ren2_2,bar1:pbRes.tpl1_color1,bar2:pbRes.tpl1_color2,point1:pbRes.tpl6_dian1,bar21:pbRes.tpl1_audioProgressBg,bar22:pbRes.tpl1_audioProgress,point2:pbRes.tpl6_dian2,audioBg:pbRes.tpl3_audioBg},t))},createVideo2:function(){document.getElementById("media2")||this._$videoBox.append(this._video2Html)},setVideoUrl2:function(t){this._video2.src=t,this._video2.volume=0,this._video2.play()},update:function(){this._video.currentTime>0&&!this._videoLoaded&&(this._videoLoaded=!0,this.canPlay(),this.opts.autoPlay?this._status="play":this.setVideoPause(),this._video.volume=1),this._video2.currentTime>0&&(this.setVideo2Pause(),this._video2.volume=1),this._video.currentTime>0&&this._video2.currentTime>0&&this.unscheduleUpdate()},setVideo2Event:function(){var t=this;this._video2=document.getElementById("media2"),this._video2.style.display="none",this._video2.addEventListener("timeupdate",function(i){var e=i.currentTarget;e.currentTime>0&&e.currentTime>=e.duration&&("ended"!=t._status&&(t.onEnded(),t._status="ended"),t.btnPlay&&t.setVideo2Pause())},!1)},onLoaded:function(){this._super();var t=this;this.barBg.setPosition(.5*cc.winSize.width,0),this.btnPlay.setPosition(50,0),this.btnHorn.setPosition(this.barBg.width-25,30),this.sliderBar.attr({anchorX:0,anchorY:0,x:130,y:10}),this.sliderHorn.attr({anchorX:0,anchorY:0,x:this.barBg.width+5,y:41,visible:!1}),this.createSliderBar2(),this.sliderBar2.attr({anchorX:0,anchorY:0,x:130,y:10,visible:!1}),this.audioBg=new cc.Sprite(this.opts.audioBg),this.addChild(this.audioBg,0),this.audioBg.setPosition(this.barBg.x+.5*this.barBg.width,30),this.barBg.zIndex=1;var i=new cc.Sprite(this.opts.ren1);i.attr({anchorX:.5,anchorY:0}),this.barBg.addChild(i),i.attr({status:"on1",x:this.barBg.width+20,y:5}),addEvent(function(i,e){"on1"==e.status?(e.status="on2",e.setTexture(t.opts.ren2),t.changeVideo()):"on2"==e.status&&(e.status="on1",e.setTexture(t.opts.ren1),t.changeVideo())},i),this.ren=i,this.showVideo(),this.hideVideo2()},createSliderBar2:function(){var t=new cc.ControlSlider(this.opts.bar1,this.opts.bar2,this.opts.point);this.barBg.addChild(t),t.attr({anchorX:0,anchorY:0}),t.setMinimumValue(0),t.setMaximumValue(this._video2.duration),t.thumbSprite.y+=5,this.sliderBar2=t,this.sliderBar2Event()},sliderBarEvent:function(){this._super();var t=this,i=this.sliderBar;i.update=function(){t._video.currentTime>0&&(t.setVideoPause(),t._video.volume=t.sliderHorn.getValue(),i.unscheduleUpdate(),i.setValue(0,!0))}},sliderBar2Event:function(){var t=this,i=this.sliderBar2;i.addTargetWithActionForControlEvents(this,function(i){t._video2.currentTime=i.getValue(),t._video2.paused&&t._video2.currentTime>1&&t.setVideo2Play()},cc.CONTROL_EVENT_VALUECHANGED),this._video2.addEventListener("timeupdate",function(t){var e=t.currentTarget;i.setValue(e.currentTime,!0)},!1),i.update=function(){t._video2.currentTime>0&&(t.setVideo2Pause(),t._video2.volume=t.sliderHorn.getValue(),i.unscheduleUpdate(),i.setValue(0,!0))}},btnPlayEvent:function(){var t=this,i=this.btnPlay;addEvent(function(i,e){if("pause"==e._status)switch(t._videoIndex){case 0:t.setVideoPlay();break;case 1:t.setVideo2Play()}else if("play"==e._status)switch(t._videoIndex){case 0:t.setVideoPause();break;case 1:t.setVideo2Pause()}},i),this._video.addEventListener("play",function(){i&&(i._status="play",i.setTexture(t.opts.stopImg),t.setRenEnable(!1),t.onPlayed())},!1),this._video.addEventListener("pause",function(e){if(i){i._status="pause",i.setTexture(t.opts.playImg),t.setRenEnable(!0);var s=e.currentTarget;s.currentTime<s.duration&&t.onPaused()}},!1),this._video2.addEventListener("play",function(){i&&(i._status="play",i.setTexture(t.opts.stopImg),t.setRenEnable(!1),t.onPlayed())},!1),this._video2.addEventListener("pause",function(e){if(i){i._status="pause",i.setTexture(t.opts.playImg),t.setRenEnable(!0);var s=e.currentTarget;s.currentTime<s.duration&&t.onPaused()}},!1)},btnHornEvent:function(){var t=this,i=this.btnHorn;i._status="on",addEvent(function(i,e){t.sliderHorn.setVisible(!t.sliderHorn.visible)},i)},sliderHornEvent:function(){var t=this,i=this.sliderHorn;i.addTargetWithActionForControlEvents(this,function(i){var e=i.getValue();t._video.volume=e,t._video2.volume=e,t._currVolume=e,0==e?(t.btnHorn.setTexture(t.opts.horn2),t.btnHorn._status="off",t.setAudioOff()):(t.btnHorn.setTexture(t.opts.horn1),t.btnHorn._status="on")},cc.CONTROL_EVENT_VALUECHANGED)},setRenEnable:function(t){t?"off1"==this.ren.status?(this.ren.status="on1",this.ren.setTexture(this.opts.ren1)):"off2"==this.ren.status&&(this.ren.status="on2",this.ren.setTexture(this.opts.ren2)):"on1"==this.ren.status?(this.ren.status="off1",this.ren.setTexture(this.opts.ren1_2)):"on2"==this.ren.status&&(this.ren.status="off2",this.ren.setTexture(this.opts.ren2_2))},hideVideo:function(){this._video.style.display="none",this._video.currentTime=0,this._video.volume=0,this._video.play(),this.sliderBar.setVisible(!1),this.sliderBar.scheduleUpdate()},showVideo:function(){this._video.style.display="",this.sliderBar.setVisible(!0)},hideVideo2:function(){this._video2.style.display="none",this._video2.currentTime=0,this._video2.volume=0,this._video2.play(),this.sliderBar2.setVisible(!1),this.sliderBar2.scheduleUpdate()},showVideo2:function(){this._video2.style.display="",this.sliderBar2.setVisible(!0)},setVideo2Play:function(){this._video2.play(),this._status="play"},setVideo2Pause:function(){this._video2.pause(),this._status="pause"},changeVideo:function(){switch(this._videoIndex){case 0:this._videoIndex=1,this.hideVideo(),this.showVideo2();break;case 1:this._videoIndex=0,this.hideVideo2(),this.showVideo()}},onClosed:function(){this._video2.paused||this.setVideo2Pause(),this._super()}});window.cc.progressBar5=t}(),function(){var t=cc.progressBarBase_horn.extend({ctor:function(t){this._super(t)},addOpts:function(t){this._super(cc.extend({autoPlay:!0,showTime:!0,showVolume:!0,barBg:pbRes.tpl3_bg,audio1:pbRes.tpl3_audio1,audio2:pbRes.tpl3_audio2,audioPoint:pbRes.tpl1_audioPoint,playImg:pbRes.tpl1_play,stopImg:pbRes.tpl1_stop,bar1:pbRes.tpl1_color1,bar2:pbRes.tpl1_color2,bar21:pbRes.tpl1_audioProgressBg,bar22:pbRes.tpl1_audioProgress,horn1:pbRes.tpl1_audio1,horn2:pbRes.tpl1_audio2,zimu1:pbRes.tpl3_zimu1,zimu2:pbRes.tpl3_zimu2,point:pbRes.tpl3_point,audioBg:pbRes.tpl3_audioBg},t))},onLoaded:function(){this._super();var t=this;this.audioBg=new cc.Sprite(this.opts.audioBg),this.addChild(this.audioBg,0),this.audioBg.setPosition(this.barBg.x+.5*this.barBg.width+40,30),this.barBg.zIndex=1,this.btnPlay.setPosition(50,0),this.sliderBar.setPosition(130,10),this.timeSprite.setPosition(750,30),this.btnHorn.setPosition(915,25),this.sliderHorn.attr({x:945,y:36,visible:!1}),this.setProgressBarHide(),addEvent(function(i,e){i.y<200&&(t.barBg.visible?i.y>65&&(t.sliderHorn.visible?(i.x<1050+(t.barBg.x-640)||i.x>1120+(t.barBg.x-640))&&t.setProgressBarHide():t.setProgressBarHide()):t.setProgressBarShow())},this)},sliderHornEvent:function(){var t=this,i=this.sliderHorn;i.addTargetWithActionForControlEvents(this,function(i){var e=i.getValue();t._video.volume=i.getValue(),0==e?(t.btnHorn.setTexture(t.opts.horn2),t.setAudioOff()):(t.btnHorn.setTexture(t.opts.horn1),t.setAudioOn())},cc.CONTROL_EVENT_VALUECHANGED)},setProgressBarHide:function(){this._prevY=this.barBg.y,this._prevAudioY=this.audioBg.y,this.audioBg.setVisible(!1),this.audioBg.attr({y:-100}),this.barBg.setVisible(!1),this.barBg.attr({y:-100}),this.sliderHorn.setVisible(!1)},setProgressBarShow:function(){this.audioBg.setVisible(!0),this.audioBg.attr({y:this._prevAudioY}),this.barBg.setVisible(!0),this.barBg.attr({y:this._prevY})},setVoiceZero:function(t){0!=this._video.volume&&(this.videoVolume=this._video.volume,this.sliderHorn.setValue(0),cc.isFunction(t)&&t())},setVoiceRestore:function(){this.sliderHorn.setValue(this.videoVolume)},onPlayed:function(){},onPaused:function(){},closeFunc:function(){},setAudioOn:function(){},setAudioOff:function(){}});window.cc.progressBar6=t}();