!function(){var e=ScienceBaseLayer.extend({ctor:function(){this._super()},onEnter:function(){this._super(),this.initUI({nav:{refresh:!1,encourage:!1}})},onCloseCallback:function(){this._super(),this.videoPlayer&&this.videoPlayer.onClosed()},initConfig:function(e){this.initPlayer(e.video,e.steps),this.initTitle(e.title)},initPlayer:function(e,i){this.videoPlayer=new t({video:e,step:i}),this.videoConfig=e,this.addChild(this.videoPlayer)},initSteps:function(){var e=(cc.winSize,[[resStory.step1_normal_png,resStory.step1_active_png],[resStory.step2_normal_png,resStory.step2_active_png],[resStory.step3_normal_png,resStory.step3_active_png],[resStory.step4_normal_png,resStory.step4_active_png]]);this.steps=[];for(var t=0;t<i.length;t++){var n=new Button(e[t],this.onStepCallback,this);this.addChild(n),n.setPosition(800+80*t,cc.winSize.height-50),this.steps.push(n)}},onStepCallback:function(e){var i=this.steps.indexOf(e),t=this.videoConfig.keyPoints[i];if(t&&t.value){var n=this.videoPlayer._video;n.currentTime=this.videoConfig.keyPoints[i].value,this.videoPlayer.setVideoPlay()}}}),i=[{title:"1"},{title:"2"},{title:"3"},{title:"4"}],t=cc.progressBar1.extend({stepPoints:[],ctor:function(e){this.stepPoints=e.step.keyPoints,this._super(e.video)},onLoaded:function(){this._super();var e=this,i=this.sliderBar;this.stepPoints.forEach(function(t,o){var s=t.img||n.stepPoints[o],r=new cc.Sprite(s);i.addChild(r),r.attr({anchorX:.5,anchorY:0,x:t.value/i.getMaximumValue()*i.width+20,visible:t.visible||!0}),r.y+=5,function(i,t){addEvent(function(){i.currentTime=t,e.setVideoPlay()},r)}(e._video,t.value)})}}),n={stepPoints:["../../../common/res/base/video/point/number1.png","../../../common/res/base/video/point/number2.png","../../../common/res/base/video/point/number3.png","../../../common/res/base/video/point/number4.png","../../../common/res/base/video/point/number5.png","../../../common/res/base/video/point/number6.png"]};addModuleResourceByName(pbRes),addModuleResourceByName(n),window.StoryBaseLayer=e}();